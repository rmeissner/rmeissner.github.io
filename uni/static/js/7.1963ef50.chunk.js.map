{"version":3,"sources":["components/OversizedPanel/index.js","assets/images/arrow-down-blue.svg","assets/images/arrow-down-grey.svg","webpack:///./src/assets/images/dropup-blue.svg?5b09","webpack:///./src/assets/images/dropdown-blue.svg?f8bc","components/ContextualInfoNew/index.js","pages/Swap/index.js"],"names":["Panel","styled","div","_templateObject","_ref","theme","concreteGray","PanelTop","_templateObject2","_ref2","PanelBottom","_templateObject3","_ref3","OversizedPanel","_ref4","hideTop","hideBottom","children","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","module","exports","__webpack_require__","p","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","react_default","d","stroke","dropup_blue_SvgDropupBlue","svgRef","props","width","height","viewBox","fill","ref","ForwardRef","forwardRef","dropdown_blue_extends","dropdown_blue_objectWithoutProperties","dropdown_blue_objectWithoutPropertiesLoose","dropdown_blue_ref2","dropdown_blue_SvgDropdownBlue","dropdown_blue_ForwardRef","SummaryWrapper","error","salmonRed","doveGray","SummaryWrapperContainer","flexRowNoWrap","royalBlue","Details","ErrorSpan","span","_templateObject4","_ref5","isError","_ref6","slippageWarning","highSlippageWarning","css","_templateObject5","_templateObject6","transparentize","warningYellow","ColoredDropup","_ref7","rest","objectWithoutProperties","_templateObject7","_ref8","_ref9","_templateObject8","ColoredDropdown","_ref10","_templateObject9","_ref11","_ref12","_templateObject10","ContextualInfo","_ref13","_ref13$openDetailsTex","openDetailsText","_ref13$closeDetailsTe","closeDetailsText","_ref13$contextualInfo","contextualInfo","_ref13$allowExpand","allowExpand","_ref13$renderTransact","renderTransactionDetails","_ref13$isError","_useState","useState","_useState2","slicedToArray","showDetails","setShowDetails","Fragment","onClick","s","role","aria-label","INPUT","OUTPUT","ETH_TO_TOKEN","TOKEN_TO_ETH","TOKEN_TO_TOKEN","ALLOWED_SLIPPAGE","ethers","utils","bigNumberify","TOKEN_ALLOWED_SLIPPAGE","DEADLINE_FROM_NOW","GAS_MARGIN","BlueSpan","LastSummaryText","DownArrowBackground","DownArrow","img","clickable","ExchangeRateWrapper","ExchangeRate","chaliceGray","Flex","calculateEtherTokenOutputFromInput","inputAmount","inputReserve","outputReserve","inputAmountWithFee","mul","numerator","denominator","add","calculateEtherTokenInputFromOutput","outputAmount","sub","constants","One","initialSwapState","independentValue","dependentValue","independentField","inputCurrency","outputCurrency","swapStateReducer","state","action","type","_home_rmeissner_repositories_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_4__","_action$payload","payload","field","currency","newInputCurrency","newOutputCurrency","_action$payload2","value","getExchangeRate","inputValue","inputDecimals","outputValue","outputDecimals","invert","undefined","factor","pow","_unused","Swap","t","useTranslation","account","useWeb3Context","addTransaction","useTransactionAdder","useEffect","ReactGA","pageview","window","location","pathname","search","_useReducer","useReducer","_useReducer2","_home_rmeissner_repositories_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","swapState","dispatchSwapState","swapType","getSwapType","_useTokenDetails","useTokenDetails","inputSymbol","symbol","decimals","inputExchangeAddress","exchangeAddress","_useTokenDetails2","outputSymbol","outputExchangeAddress","inputExchangeContract","useExchangeContract","outputExchangeContract","contract","inputAllowance","useAddressAllowance","_useExchangeReserves","useExchangeReserves","inputReserveETH","reserveETH","inputReserveToken","reserveToken","_useExchangeReserves2","outputReserveETH","outputReserveToken","inputBalance","useAddressBalance","outputBalance","inputBalanceFormatted","Number","isInteger","amountFormatter","Math","min","outputBalanceFormatted","independentDecimals","dependentDecimals","independentValueParsed","setIndependentValueParsed","dependentValueFormatted","inputValueParsed","inputValueFormatted","outputValueParsed","outputValueFormatted","_useState3","_useState4","independentError","setIndependentError","parsedValue","parseUnits","lte","Zero","gte","MaxUint256","Error","_unused3","_calculateSlippageBou","token","offset","minimum","maximum","lt","gt","calculateSlippageBounds","dependentValueMinumum","dependentValueMaximum","_useState5","_useState6","inputError","setInputError","_useState7","_useState8","showUnlock","setShowUnlock","inputValueCalculation","amount","calculatedDependentValue","_unused4","_unused5","reserveETHFirst","reserveTokenFirst","reserveETHSecond","reserveTokenSecond","intermediateValue","_unused6","_useState9","_useState10","inverted","setInverted","exchangeRate","exchangeRateInverted","marketRate","firstRate","secondRate","_unused2","getMarketRate","percentSlippage","abs","percentSlippageFormatted","parseEther","isValid","estimatedText","concat","formatBalance","event","category","b","text","react__WEBPACK_IMPORTED_MODULE_6___default","_onSwap","_home_rmeissner_repositories_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_rmeissner_repositories_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","deadline","estimate","method","args","estimatedGasLimit","wrap","_context","prev","next","ceil","Date","now","ethToTokenSwapInput","tokenToEthSwapInput","tokenToTokenSwapInput","ethToTokenSwapOutput","tokenToEthSwapOutput","tokenToTokenSwapOutput","_home_rmeissner_repositories_uniswap_frontend_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","sent","gasLimit","calculateGasMargin","then","response","stop","_components_CurrencyInputPanel__WEBPACK_IMPORTED_MODULE_13__","title","description","extraText","extraTextClickHander","valueToSet","onCurrencySelected","onValueChange","selectedTokens","selectedTokenAddress","errorMessage","_components_OversizedPanel__WEBPACK_IMPORTED_MODULE_15__","alt","src","ArrowDownBlue","ArrowDownGrey","disableUnlock","slippageWarningText","_components_ContextualInfoNew__WEBPACK_IMPORTED_MODULE_14__","renderSummary","_theme__WEBPACK_IMPORTED_MODULE_12__","disabled","warning"],"mappings":"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","file":"static/js/7.1963ef50.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nconst Panel = styled.div`\n  position: relative;\n  background-color: ${({ theme }) => theme.concreteGray};\n  width: calc(100% - 1rem);\n  margin: 0 auto;\n  border-radius: 0.625rem;\n`\n\nconst PanelTop = styled.div`\n  content: '';\n  position: absolute;\n  top: -0.5rem;\n  left: 0;\n  height: 1rem;\n  width: 100%;\n  background-color: ${({ theme }) => theme.concreteGray};\n`\n\nconst PanelBottom = styled.div`\n  position: absolute;\n  top: 80%;\n  left: 0;\n  height: 1rem;\n  width: 100%;\n  background-color: ${({ theme }) => theme.concreteGray};\n`\n\nexport default function OversizedPanel({ hideTop, hideBottom, children }) {\n  return (\n    <Panel>\n      {hideTop || <PanelTop />}\n      {children}\n      {hideBottom || <PanelBottom />}\n    </Panel>\n  )\n}\n","module.exports = __webpack_public_path__ + \"static/media/arrow-down-blue.cd061363.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-down-grey.c0dedd2f.svg\";","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M11.4673 6L6.23364 1L0.999995 6\",\n  stroke: \"#388DFF\"\n});\n\nvar SvgDropupBlue = function SvgDropupBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDropupBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dropup-blue.b96d70e1.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M0.97168 1L6.20532 6L11.439 1\",\n  stroke: \"#2F80ED\"\n});\n\nvar SvgDropdownBlue = function SvgDropdownBlue(_ref) {\n  var svgRef = _ref.svgRef,\n      props = _objectWithoutProperties(_ref, [\"svgRef\"]);\n\n  return React.createElement(\"svg\", _extends({\n    width: 12,\n    height: 7,\n    viewBox: \"0 0 12 7\",\n    fill: \"none\",\n    ref: svgRef\n  }, props), _ref2);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return React.createElement(SvgDropdownBlue, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/dropdown-blue.b20914ec.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useState } from 'react'\nimport styled, { css } from 'styled-components'\nimport { transparentize } from 'polished'\n\nimport { ReactComponent as Dropup } from '../../assets/images/dropup-blue.svg'\nimport { ReactComponent as Dropdown } from '../../assets/images/dropdown-blue.svg'\n\nconst SummaryWrapper = styled.div`\n  color: ${({ error, theme }) => (error ? theme.salmonRed : theme.doveGray)};\n  font-size: 0.75rem;\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n`\n\nconst SummaryWrapperContainer = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  color: ${({ theme }) => theme.royalBlue};\n  text-align: center;\n  margin-top: 1rem;\n  padding-top: 1rem;\n  cursor: pointer;\n  align-items: center;\n  justify-content: center;\n  font-size: 0.75rem;\n\n  img {\n    height: 0.75rem;\n    width: 0.75rem;\n  }\n`\n\nconst Details = styled.div`\n  background-color: ${({ theme }) => theme.concreteGray};\n  padding: 1.5rem;\n  border-radius: 1rem;\n  font-size: 0.75rem;\n  margin-top: 1rem;\n`\n\nconst ErrorSpan = styled.span`\n  margin-right: 12px;\n  font-size: 0.75rem;\n  line-height: 0.75rem;\n\n  color: ${({ isError, theme }) => isError && theme.salmonRed};\n  ${({ slippageWarning, highSlippageWarning, theme }) =>\n    highSlippageWarning\n      ? css`\n          color: ${theme.salmonRed};\n          font-weight: 600;\n        `\n      : slippageWarning &&\n        css`\n          background-color: ${transparentize(0.6, theme.warningYellow)};\n          font-weight: 600;\n          padding: 0.25rem;\n        `}\n`\n\nconst WrappedDropup = ({ isError, highSlippageWarning, ...rest }) => <Dropup {...rest} />\nconst ColoredDropup = styled(WrappedDropup)`\n  path {\n    stroke: ${({ isError, theme }) => isError && theme.salmonRed};\n\n    ${({ highSlippageWarning, theme }) =>\n      highSlippageWarning &&\n      css`\n        stroke: ${theme.salmonRed};\n      `}\n  }\n`\n\nconst WrappedDropdown = ({ isError, highSlippageWarning, ...rest }) => <Dropdown {...rest} />\nconst ColoredDropdown = styled(WrappedDropdown)`\n  path {\n    stroke: ${({ isError, theme }) => isError && theme.salmonRed};\n\n    ${({ highSlippageWarning, theme }) =>\n      highSlippageWarning &&\n      css`\n        stroke: ${theme.salmonRed};\n      `}\n  }\n`\n\nexport default function ContextualInfo({\n  openDetailsText = 'Transaction Details',\n  closeDetailsText = 'Hide Details',\n  contextualInfo = '',\n  allowExpand = false,\n  renderTransactionDetails = () => {},\n  isError = false,\n  slippageWarning,\n  highSlippageWarning\n}) {\n  const [showDetails, setShowDetails] = useState(false)\n\n  return !allowExpand ? (\n    <SummaryWrapper>{contextualInfo}</SummaryWrapper>\n  ) : (\n    <>\n      <SummaryWrapperContainer onClick={() => setShowDetails(s => !s)}>\n        <>\n          <ErrorSpan isError={isError} slippageWarning={slippageWarning} highSlippageWarning={highSlippageWarning}>\n            {(slippageWarning || highSlippageWarning) && (\n              <span role=\"img\" aria-label=\"warning\">\n                ⚠️\n              </span>\n            )}\n            {contextualInfo ? contextualInfo : showDetails ? closeDetailsText : openDetailsText}\n          </ErrorSpan>\n          {showDetails ? (\n            <ColoredDropup isError={isError} highSlippageWarning={highSlippageWarning} />\n          ) : (\n            <ColoredDropdown isError={isError} highSlippageWarning={highSlippageWarning} />\n          )}\n        </>\n      </SummaryWrapperContainer>\n      {showDetails && <Details>{renderTransactionDetails()}</Details>}\n    </>\n  )\n}\n","import React, { useState, useReducer, useEffect } from 'react'\nimport ReactGA from 'react-ga'\nimport { useTranslation } from 'react-i18next'\nimport { useWeb3Context } from 'web3-react'\nimport { ethers } from 'ethers'\nimport styled from 'styled-components'\n\nimport { Button } from '../../theme'\nimport CurrencyInputPanel from '../../components/CurrencyInputPanel'\nimport NewContextualInfo from '../../components/ContextualInfoNew'\nimport OversizedPanel from '../../components/OversizedPanel'\nimport ArrowDownBlue from '../../assets/images/arrow-down-blue.svg'\nimport ArrowDownGrey from '../../assets/images/arrow-down-grey.svg'\nimport { amountFormatter, calculateGasMargin } from '../../utils'\nimport { useExchangeContract } from '../../hooks'\nimport { useTokenDetails } from '../../contexts/Tokens'\nimport { useTransactionAdder } from '../../contexts/Transactions'\nimport { useAddressBalance, useExchangeReserves } from '../../contexts/Balances'\nimport { useAddressAllowance } from '../../contexts/Allowances'\n\nconst INPUT = 0\nconst OUTPUT = 1\n\nconst ETH_TO_TOKEN = 0\nconst TOKEN_TO_ETH = 1\nconst TOKEN_TO_TOKEN = 2\n\n// denominated in bips\nconst ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(200)\nconst TOKEN_ALLOWED_SLIPPAGE = ethers.utils.bigNumberify(400)\n\n// denominated in seconds\nconst DEADLINE_FROM_NOW = 60 * 15\n\n// denominated in bips\nconst GAS_MARGIN = ethers.utils.bigNumberify(1000)\n\nconst BlueSpan = styled.span`\n  color: ${({ theme }) => theme.royalBlue};\n`\n\nconst LastSummaryText = styled.div`\n  margin-top: 1rem;\n`\n\nconst DownArrowBackground = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap}\n  justify-content: center;\n  align-items: center;\n`\n\nconst DownArrow = styled.img`\n  width: 0.625rem;\n  height: 0.625rem;\n  position: relative;\n  padding: 0.875rem;\n  cursor: ${({ clickable }) => clickable && 'pointer'};\n`\n\nconst ExchangeRateWrapper = styled.div`\n  ${({ theme }) => theme.flexRowNoWrap};\n  align-items: center;\n  color: ${({ theme }) => theme.doveGray};\n  font-size: 0.75rem;\n  padding: 0.5rem 1rem;\n`\n\nconst ExchangeRate = styled.span`\n  flex: 1 1 auto;\n  width: 0;\n  color: ${({ theme }) => theme.chaliceGray};\n`\n\nconst Flex = styled.div`\n  display: flex;\n  justify-content: center;\n  padding: 2rem;\n\n  button {\n    max-width: 20rem;\n  }\n`\n\nfunction calculateSlippageBounds(value, token = false) {\n  if (value) {\n    const offset = value.mul(token ? TOKEN_ALLOWED_SLIPPAGE : ALLOWED_SLIPPAGE).div(ethers.utils.bigNumberify(10000))\n    const minimum = value.sub(offset)\n    const maximum = value.add(offset)\n    return {\n      minimum: minimum.lt(ethers.constants.Zero) ? ethers.constants.Zero : minimum,\n      maximum: maximum.gt(ethers.constants.MaxUint256) ? ethers.constants.MaxUint256 : maximum\n    }\n  } else {\n    return {}\n  }\n}\n\nfunction getSwapType(inputCurrency, outputCurrency) {\n  if (!inputCurrency || !outputCurrency) {\n    return null\n  } else if (inputCurrency === 'ETH') {\n    return ETH_TO_TOKEN\n  } else if (outputCurrency === 'ETH') {\n    return TOKEN_TO_ETH\n  } else {\n    return TOKEN_TO_TOKEN\n  }\n}\n\n// this mocks the getInputPrice function, and calculates the required output\nfunction calculateEtherTokenOutputFromInput(inputAmount, inputReserve, outputReserve) {\n  const inputAmountWithFee = inputAmount.mul(ethers.utils.bigNumberify(997))\n  const numerator = inputAmountWithFee.mul(outputReserve)\n  const denominator = inputReserve.mul(ethers.utils.bigNumberify(1000)).add(inputAmountWithFee)\n  return numerator.div(denominator)\n}\n\n// this mocks the getOutputPrice function, and calculates the required input\nfunction calculateEtherTokenInputFromOutput(outputAmount, inputReserve, outputReserve) {\n  const numerator = inputReserve.mul(outputAmount).mul(ethers.utils.bigNumberify(1000))\n  const denominator = outputReserve.sub(outputAmount).mul(ethers.utils.bigNumberify(997))\n  return numerator.div(denominator).add(ethers.constants.One)\n}\n\nconst initialSwapState = {\n  independentValue: '', // this is a user input\n  dependentValue: '', // this is a calculated number\n  independentField: INPUT,\n  inputCurrency: 'ETH',\n  outputCurrency: ''\n}\n\nfunction swapStateReducer(state, action) {\n  switch (action.type) {\n    case 'FLIP_INDEPENDENT': {\n      const { independentField, inputCurrency, outputCurrency } = state\n      return {\n        ...state,\n        dependentValue: '',\n        independentField: independentField === INPUT ? OUTPUT : INPUT,\n        inputCurrency: outputCurrency,\n        outputCurrency: inputCurrency\n      }\n    }\n    case 'SELECT_CURRENCY': {\n      const { inputCurrency, outputCurrency } = state\n      const { field, currency } = action.payload\n\n      const newInputCurrency = field === INPUT ? currency : inputCurrency\n      const newOutputCurrency = field === OUTPUT ? currency : outputCurrency\n\n      if (newInputCurrency === newOutputCurrency) {\n        return {\n          ...state,\n          inputCurrency: field === INPUT ? currency : '',\n          outputCurrency: field === OUTPUT ? currency : ''\n        }\n      } else {\n        return {\n          ...state,\n          inputCurrency: newInputCurrency,\n          outputCurrency: newOutputCurrency\n        }\n      }\n    }\n    case 'UPDATE_INDEPENDENT': {\n      const { field, value } = action.payload\n      const { dependentValue, independentValue } = state\n      return {\n        ...state,\n        independentValue: value,\n        dependentValue: value === independentValue ? dependentValue : '',\n        independentField: field\n      }\n    }\n    case 'UPDATE_DEPENDENT': {\n      return {\n        ...state,\n        dependentValue: action.payload\n      }\n    }\n    default: {\n      return initialSwapState\n    }\n  }\n}\n\nfunction getExchangeRate(inputValue, inputDecimals, outputValue, outputDecimals, invert = false) {\n  try {\n    if (\n      inputValue &&\n      (inputDecimals || inputDecimals === 0) &&\n      outputValue &&\n      (outputDecimals || outputDecimals === 0)\n    ) {\n      const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\n\n      if (invert) {\n        return inputValue\n          .mul(factor)\n          .div(outputValue)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n      } else {\n        return outputValue\n          .mul(factor)\n          .div(inputValue)\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(inputDecimals)))\n          .div(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(outputDecimals)))\n      }\n    }\n  } catch {}\n}\n\nfunction getMarketRate(\n  swapType,\n  inputReserveETH,\n  inputReserveToken,\n  inputDecimals,\n  outputReserveETH,\n  outputReserveToken,\n  outputDecimals,\n  invert = false\n) {\n  if (swapType === ETH_TO_TOKEN) {\n    return getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals, invert)\n  } else if (swapType === TOKEN_TO_ETH) {\n    return getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18, invert)\n  } else if (swapType === TOKEN_TO_TOKEN) {\n    const factor = ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18))\n    const firstRate = getExchangeRate(inputReserveToken, inputDecimals, inputReserveETH, 18)\n    const secondRate = getExchangeRate(outputReserveETH, 18, outputReserveToken, outputDecimals)\n    try {\n      return !!(firstRate && secondRate) ? firstRate.mul(secondRate).div(factor) : undefined\n    } catch {}\n  }\n}\n\nexport default function Swap() {\n  const { t } = useTranslation()\n  const { account } = useWeb3Context()\n\n  const addTransaction = useTransactionAdder()\n\n  // analytics\n  useEffect(() => {\n    ReactGA.pageview(window.location.pathname + window.location.search)\n  }, [])\n\n  // core swap state\n  const [swapState, dispatchSwapState] = useReducer(swapStateReducer, initialSwapState)\n  const { independentValue, dependentValue, independentField, inputCurrency, outputCurrency } = swapState\n\n  // get swap type from the currency types\n  const swapType = getSwapType(inputCurrency, outputCurrency)\n\n  // get decimals and exchange addressfor each of the currency types\n  const { symbol: inputSymbol, decimals: inputDecimals, exchangeAddress: inputExchangeAddress } = useTokenDetails(\n    inputCurrency\n  )\n  const { symbol: outputSymbol, decimals: outputDecimals, exchangeAddress: outputExchangeAddress } = useTokenDetails(\n    outputCurrency\n  )\n\n  const inputExchangeContract = useExchangeContract(inputExchangeAddress)\n  const outputExchangeContract = useExchangeContract(outputExchangeAddress)\n  const contract = swapType === ETH_TO_TOKEN ? outputExchangeContract : inputExchangeContract\n\n  // get input allowance\n  const inputAllowance = useAddressAllowance(account, inputCurrency, inputExchangeAddress)\n\n  // fetch reserves for each of the currency types\n  const { reserveETH: inputReserveETH, reserveToken: inputReserveToken } = useExchangeReserves(inputCurrency)\n  const { reserveETH: outputReserveETH, reserveToken: outputReserveToken } = useExchangeReserves(outputCurrency)\n\n  // get balances for each of the currency types\n  const inputBalance = useAddressBalance(account, inputCurrency)\n  const outputBalance = useAddressBalance(account, outputCurrency)\n  const inputBalanceFormatted = !!(inputBalance && Number.isInteger(inputDecimals))\n    ? amountFormatter(inputBalance, inputDecimals, Math.min(4, inputDecimals))\n    : ''\n  const outputBalanceFormatted = !!(outputBalance && Number.isInteger(outputDecimals))\n    ? amountFormatter(outputBalance, outputDecimals, Math.min(4, outputDecimals))\n    : ''\n\n  // compute useful transforms of the data above\n  const independentDecimals = independentField === INPUT ? inputDecimals : outputDecimals\n  const dependentDecimals = independentField === OUTPUT ? inputDecimals : outputDecimals\n\n  // declare/get parsed and formatted versions of input/output values\n  const [independentValueParsed, setIndependentValueParsed] = useState()\n  const dependentValueFormatted = !!(dependentValue && (dependentDecimals || dependentDecimals === 0))\n    ? amountFormatter(dependentValue, dependentDecimals, Math.min(4, dependentDecimals), false)\n    : ''\n  const inputValueParsed = independentField === INPUT ? independentValueParsed : dependentValue\n  const inputValueFormatted = independentField === INPUT ? independentValue : dependentValueFormatted\n  const outputValueParsed = independentField === OUTPUT ? independentValueParsed : dependentValue\n  const outputValueFormatted = independentField === OUTPUT ? independentValue : dependentValueFormatted\n\n  // validate + parse independent value\n  const [independentError, setIndependentError] = useState()\n  useEffect(() => {\n    if (independentValue && (independentDecimals || independentDecimals === 0)) {\n      try {\n        const parsedValue = ethers.utils.parseUnits(independentValue, independentDecimals)\n\n        if (parsedValue.lte(ethers.constants.Zero) || parsedValue.gte(ethers.constants.MaxUint256)) {\n          throw Error()\n        } else {\n          setIndependentValueParsed(parsedValue)\n          setIndependentError(null)\n        }\n      } catch {\n        setIndependentError(t('inputNotValid'))\n      }\n\n      return () => {\n        setIndependentValueParsed()\n        setIndependentError()\n      }\n    }\n  }, [independentValue, independentDecimals, t])\n\n  // calculate slippage from target rate\n  const { minimum: dependentValueMinumum, maximum: dependentValueMaximum } = calculateSlippageBounds(\n    dependentValue,\n    swapType === TOKEN_TO_TOKEN\n  )\n\n  // validate input allowance + balance\n  const [inputError, setInputError] = useState()\n  const [showUnlock, setShowUnlock] = useState(false)\n  useEffect(() => {\n    const inputValueCalculation = independentField === INPUT ? independentValueParsed : dependentValueMaximum\n    if (inputBalance && (inputAllowance || inputCurrency === 'ETH') && inputValueCalculation) {\n      if (inputBalance.lt(inputValueCalculation)) {\n        setInputError(t('insufficientBalance'))\n      } else if (inputCurrency !== 'ETH' && inputAllowance.lt(inputValueCalculation)) {\n        setInputError(t('unlockTokenCont'))\n        setShowUnlock(true)\n      } else {\n        setInputError(null)\n        setShowUnlock(false)\n      }\n\n      return () => {\n        setInputError()\n        setShowUnlock(false)\n      }\n    }\n  }, [independentField, independentValueParsed, dependentValueMaximum, inputBalance, inputCurrency, inputAllowance, t])\n\n  // calculate dependent value\n  useEffect(() => {\n    const amount = independentValueParsed\n\n    if (swapType === ETH_TO_TOKEN) {\n      const reserveETH = outputReserveETH\n      const reserveToken = outputReserveToken\n\n      if (amount && reserveETH && reserveToken) {\n        try {\n          const calculatedDependentValue =\n            independentField === INPUT\n              ? calculateEtherTokenOutputFromInput(amount, reserveETH, reserveToken)\n              : calculateEtherTokenInputFromOutput(amount, reserveETH, reserveToken)\n\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\n            throw Error()\n          }\n\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\n        } catch {\n          setIndependentError(t('insufficientLiquidity'))\n        }\n        return () => {\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\n        }\n      }\n    } else if (swapType === TOKEN_TO_ETH) {\n      const reserveETH = inputReserveETH\n      const reserveToken = inputReserveToken\n\n      if (amount && reserveETH && reserveToken) {\n        try {\n          const calculatedDependentValue =\n            independentField === INPUT\n              ? calculateEtherTokenOutputFromInput(amount, reserveToken, reserveETH)\n              : calculateEtherTokenInputFromOutput(amount, reserveToken, reserveETH)\n\n          if (calculatedDependentValue.lte(ethers.constants.Zero)) {\n            throw Error()\n          }\n\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\n        } catch {\n          setIndependentError(t('insufficientLiquidity'))\n        }\n        return () => {\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\n        }\n      }\n    } else if (swapType === TOKEN_TO_TOKEN) {\n      const reserveETHFirst = inputReserveETH\n      const reserveTokenFirst = inputReserveToken\n\n      const reserveETHSecond = outputReserveETH\n      const reserveTokenSecond = outputReserveToken\n\n      if (amount && reserveETHFirst && reserveTokenFirst && reserveETHSecond && reserveTokenSecond) {\n        try {\n          if (independentField === INPUT) {\n            const intermediateValue = calculateEtherTokenOutputFromInput(amount, reserveTokenFirst, reserveETHFirst)\n            if (intermediateValue.lte(ethers.constants.Zero)) {\n              throw Error()\n            }\n            const calculatedDependentValue = calculateEtherTokenOutputFromInput(\n              intermediateValue,\n              reserveETHSecond,\n              reserveTokenSecond\n            )\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\n              throw Error()\n            }\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\n          } else {\n            const intermediateValue = calculateEtherTokenInputFromOutput(amount, reserveETHSecond, reserveTokenSecond)\n            if (intermediateValue.lte(ethers.constants.Zero)) {\n              throw Error()\n            }\n            const calculatedDependentValue = calculateEtherTokenInputFromOutput(\n              intermediateValue,\n              reserveTokenFirst,\n              reserveETHFirst\n            )\n            if (calculatedDependentValue.lte(ethers.constants.Zero)) {\n              throw Error()\n            }\n            dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: calculatedDependentValue })\n          }\n        } catch {\n          setIndependentError(t('insufficientLiquidity'))\n        }\n        return () => {\n          dispatchSwapState({ type: 'UPDATE_DEPENDENT', payload: '' })\n        }\n      }\n    }\n  }, [\n    independentValueParsed,\n    swapType,\n    outputReserveETH,\n    outputReserveToken,\n    inputReserveETH,\n    inputReserveToken,\n    independentField,\n    t\n  ])\n\n  const [inverted, setInverted] = useState(false)\n  const exchangeRate = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals)\n  const exchangeRateInverted = getExchangeRate(inputValueParsed, inputDecimals, outputValueParsed, outputDecimals, true)\n\n  const marketRate = getMarketRate(\n    swapType,\n    inputReserveETH,\n    inputReserveToken,\n    inputDecimals,\n    outputReserveETH,\n    outputReserveToken,\n    outputDecimals\n  )\n\n  const percentSlippage =\n    exchangeRate && marketRate\n      ? exchangeRate\n          .sub(marketRate)\n          .abs()\n          .mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(18)))\n          .div(marketRate)\n          .sub(ethers.utils.bigNumberify(3).mul(ethers.utils.bigNumberify(10).pow(ethers.utils.bigNumberify(15))))\n      : undefined\n  const percentSlippageFormatted = percentSlippage && amountFormatter(percentSlippage, 16, 2)\n  const slippageWarning =\n    percentSlippage &&\n    percentSlippage.gte(ethers.utils.parseEther('.05')) &&\n    percentSlippage.lt(ethers.utils.parseEther('.2')) // [5% - 20%)\n  const highSlippageWarning = percentSlippage && percentSlippage.gte(ethers.utils.parseEther('.2')) // [20+%\n\n  const isValid = exchangeRate && inputError === null && independentError === null\n\n  const estimatedText = `(${t('estimated')})`\n  function formatBalance(value) {\n    return `Balance: ${value}`\n  }\n\n  function renderTransactionDetails() {\n    ReactGA.event({\n      category: 'TransactionDetail',\n      action: 'Open'\n    })\n\n    const b = text => <BlueSpan>{text}</BlueSpan>\n\n    if (independentField === INPUT) {\n      return (\n        <div>\n          <div>\n            {t('youAreSelling')}{' '}\n            {b(\n              `${amountFormatter(\n                independentValueParsed,\n                independentDecimals,\n                Math.min(4, independentDecimals)\n              )} ${inputSymbol}`\n            )}\n            .\n          </div>\n          <LastSummaryText>\n            {t('youWillReceive')}{' '}\n            {b(\n              `${amountFormatter(\n                dependentValueMinumum,\n                dependentDecimals,\n                Math.min(4, dependentDecimals)\n              )} ${outputSymbol}`\n            )}{' '}\n            {t('orTransFail')}\n          </LastSummaryText>\n          <LastSummaryText>\n            {(slippageWarning || highSlippageWarning) && (\n              <span role=\"img\" aria-label=\"warning\">\n                ⚠️\n              </span>\n            )}\n            {t('priceChange')} {b(`${percentSlippageFormatted}%`)}.\n          </LastSummaryText>\n        </div>\n      )\n    } else {\n      return (\n        <div>\n          <div>\n            {t('youAreBuying')}{' '}\n            {b(\n              `${amountFormatter(\n                independentValueParsed,\n                independentDecimals,\n                Math.min(4, independentDecimals)\n              )} ${outputSymbol}`\n            )}\n            .\n          </div>\n          <LastSummaryText>\n            {t('itWillCost')}{' '}\n            {b(\n              `${amountFormatter(\n                dependentValueMaximum,\n                dependentDecimals,\n                Math.min(4, dependentDecimals)\n              )} ${inputSymbol}`\n            )}{' '}\n            {t('orTransFail')}\n          </LastSummaryText>\n          <LastSummaryText>\n            {t('priceChange')} {b(`${percentSlippageFormatted}%`)}.\n          </LastSummaryText>\n        </div>\n      )\n    }\n  }\n\n  function renderSummary() {\n    let contextualInfo = ''\n    let isError = false\n\n    if (inputError || independentError) {\n      contextualInfo = inputError || independentError\n      isError = true\n    } else if (!inputCurrency || !outputCurrency) {\n      contextualInfo = t('selectTokenCont')\n    } else if (!independentValue) {\n      contextualInfo = t('enterValueCont')\n    } else if (!account) {\n      contextualInfo = t('noWallet')\n      isError = true\n    }\n\n    const slippageWarningText = highSlippageWarning\n      ? t('highSlippageWarning')\n      : slippageWarning\n      ? t('slippageWarning')\n      : ''\n\n    return (\n      <NewContextualInfo\n        openDetailsText={t('transactionDetails')}\n        closeDetailsText={t('hideDetails')}\n        contextualInfo={contextualInfo ? contextualInfo : slippageWarningText}\n        allowExpand={!!(inputCurrency && outputCurrency && inputValueParsed && outputValueParsed)}\n        isError={isError}\n        slippageWarning={slippageWarning && !contextualInfo}\n        highSlippageWarning={highSlippageWarning && !contextualInfo}\n        renderTransactionDetails={renderTransactionDetails}\n      />\n    )\n  }\n\n  async function onSwap() {\n    const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW\n\n    let estimate, method, args, value\n    if (independentField === INPUT) {\n      ReactGA.event({\n        category: `${swapType}`,\n        action: 'SwapInput'\n      })\n\n      if (swapType === ETH_TO_TOKEN) {\n        estimate = contract.estimate.ethToTokenSwapInput\n        method = contract.ethToTokenSwapInput\n        args = [dependentValueMinumum, deadline]\n        value = independentValueParsed\n      } else if (swapType === TOKEN_TO_ETH) {\n        estimate = contract.estimate.tokenToEthSwapInput\n        method = contract.tokenToEthSwapInput\n        args = [independentValueParsed, dependentValueMinumum, deadline]\n        value = ethers.constants.Zero\n      } else if (swapType === TOKEN_TO_TOKEN) {\n        estimate = contract.estimate.tokenToTokenSwapInput\n        method = contract.tokenToTokenSwapInput\n        args = [independentValueParsed, dependentValueMinumum, ethers.constants.One, deadline, outputCurrency]\n        value = ethers.constants.Zero\n      }\n    } else if (independentField === OUTPUT) {\n      ReactGA.event({\n        category: `${swapType}`,\n        action: 'SwapOutput'\n      })\n\n      if (swapType === ETH_TO_TOKEN) {\n        estimate = contract.estimate.ethToTokenSwapOutput\n        method = contract.ethToTokenSwapOutput\n        args = [independentValueParsed, deadline]\n        value = dependentValueMaximum\n      } else if (swapType === TOKEN_TO_ETH) {\n        estimate = contract.estimate.tokenToEthSwapOutput\n        method = contract.tokenToEthSwapOutput\n        args = [independentValueParsed, dependentValueMaximum, deadline]\n        value = ethers.constants.Zero\n      } else if (swapType === TOKEN_TO_TOKEN) {\n        estimate = contract.estimate.tokenToTokenSwapOutput\n        method = contract.tokenToTokenSwapOutput\n        args = [independentValueParsed, dependentValueMaximum, ethers.constants.MaxUint256, deadline, outputCurrency]\n        value = ethers.constants.Zero\n      }\n    }\n\n    const estimatedGasLimit = await estimate(...args, { value })\n    method(...args, { value, gasLimit: calculateGasMargin(estimatedGasLimit, GAS_MARGIN) }).then(response => {\n      addTransaction(response)\n    })\n  }\n\n  return (\n    <>\n      <CurrencyInputPanel\n        title={t('input')}\n        description={inputValueFormatted && independentField === OUTPUT ? estimatedText : ''}\n        extraText={inputBalanceFormatted && formatBalance(inputBalanceFormatted)}\n        extraTextClickHander={() => {\n          if (inputBalance && inputDecimals) {\n            const valueToSet = inputCurrency === 'ETH' ? inputBalance.sub(ethers.utils.parseEther('.1')) : inputBalance\n            if (valueToSet.gt(ethers.constants.Zero)) {\n              dispatchSwapState({\n                type: 'UPDATE_INDEPENDENT',\n                payload: { value: amountFormatter(valueToSet, inputDecimals, inputDecimals, false), field: INPUT }\n              })\n            }\n          }\n        }}\n        onCurrencySelected={inputCurrency => {\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: inputCurrency, field: INPUT } })\n        }}\n        onValueChange={inputValue => {\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: inputValue, field: INPUT } })\n        }}\n        showUnlock={showUnlock}\n        selectedTokens={[inputCurrency, outputCurrency]}\n        selectedTokenAddress={inputCurrency}\n        value={inputValueFormatted}\n        errorMessage={inputError ? inputError : independentField === INPUT ? independentError : ''}\n      />\n      <OversizedPanel>\n        <DownArrowBackground>\n          <DownArrow\n            onClick={() => {\n              dispatchSwapState({ type: 'FLIP_INDEPENDENT' })\n            }}\n            clickable\n            alt=\"swap\"\n            src={isValid ? ArrowDownBlue : ArrowDownGrey}\n          />\n        </DownArrowBackground>\n      </OversizedPanel>\n      <CurrencyInputPanel\n        title={t('output')}\n        description={outputValueFormatted && independentField === INPUT ? estimatedText : ''}\n        extraText={outputBalanceFormatted && formatBalance(outputBalanceFormatted)}\n        onCurrencySelected={outputCurrency => {\n          dispatchSwapState({ type: 'SELECT_CURRENCY', payload: { currency: outputCurrency, field: OUTPUT } })\n        }}\n        onValueChange={outputValue => {\n          dispatchSwapState({ type: 'UPDATE_INDEPENDENT', payload: { value: outputValue, field: OUTPUT } })\n        }}\n        selectedTokens={[inputCurrency, outputCurrency]}\n        selectedTokenAddress={outputCurrency}\n        value={outputValueFormatted}\n        errorMessage={independentField === OUTPUT ? independentError : ''}\n        disableUnlock\n      />\n      <OversizedPanel hideBottom>\n        <ExchangeRateWrapper\n          onClick={() => {\n            setInverted(inverted => !inverted)\n          }}\n        >\n          <ExchangeRate>{t('exchangeRate')}</ExchangeRate>\n          {inverted ? (\n            <span>\n              {exchangeRate\n                ? `1 ${outputSymbol} = ${amountFormatter(exchangeRateInverted, 18, 4, false)} ${inputSymbol}`\n                : ' - '}\n            </span>\n          ) : (\n            <span>\n              {exchangeRate\n                ? `1 ${inputSymbol} = ${amountFormatter(exchangeRate, 18, 4, false)} ${outputSymbol}`\n                : ' - '}\n            </span>\n          )}\n        </ExchangeRateWrapper>\n      </OversizedPanel>\n      {renderSummary()}\n      <Flex>\n        <Button disabled={!isValid} onClick={onSwap} warning={highSlippageWarning}>\n          {highSlippageWarning ? t('swapAnyway') : t('swap')}\n        </Button>\n      </Flex>\n    </>\n  )\n}\n"],"sourceRoot":""}